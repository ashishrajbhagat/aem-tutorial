<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>AEM Tutorial - Experience Fragment</title>
		<meta name="description" content="Master Adobe Experience Manager (AEM) with our in-depth tutorials, covering AEM components, workflows, servlets, models, Sling, OSGi services, Touch UI dialogs, CRXDE, and more. Perfect for beginners, advanced developers, and AEM architects looking to enhance their skills. Learn how to build scalable and efficient AEM solutions with best practices.">
		<meta name="keywords" content="AEM, Adobe Experience Manager, AEM Tutorial, AEM Training, AEM Components, AEM Workflows, AEM Servlets, AEM Models, AEM Sling, AEM OSGi, AEM Touch UI, AEM CRXDE, AEM DAM, AEM Metadata, AEM Content Fragments, AEM Experience Fragments, AEM Editable Templates, AEM Dispatcher, AEM Forms, AEM Sites, AEM Assets, AEM Cloud, AEM as a Cloud Service, AEM On-Premise, AEM SEO, AEM Best Practices, Learn AEM, AEM Course, AEM Development, AEM Headless, AEM SPA, AEM React, AEM Angular, AEM HTL, AEM Sightly, AEM Frontend, AEM Backend, AEM Workflow Development, AEM Performance Optimization, AEM Interview Questions">
		<meta name="author" content="Ashish Raj">
		<link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="stylesheet" href="../css/styles.css">
	</head>
	<body>
		<div class="sidebar" id="sidebar">
			<div class="logo">
				<h2><a href="/">AEM Tutorial</a></h2>
			</div>
            <div class="sidebar-search">
                <input type="text" id="sidebarSearch" placeholder="üîç Search..." />
            </div>
			<nav class="nav" id="sidebar-nav"></nav>
			<div class="footer">
				<p>&copy; 2025 AEM Tutorial</p>
			</div>
		</div>
		<span class="hamburger" onclick="toggleMenu()">&#9776;</span>
		<main class="content" id="content">
			<h1>Experience Fragment</h1>
			<section class="card">
				<h2>Introduction to Experience Fragments</h2>
				<p>Experience Fragments (XFs) in AEM are reusable, standalone content blocks that include one or more components‚Äîsuch as banners, text, images, and CTAs‚Äîdesigned to deliver consistent and personalized experiences across multiple channels like websites, mobile apps, and third-party platforms. They are created using AEM templates and can include components like images, text, and buttons. These fragments can be exported to Adobe Target or used directly in AEM pages to maintain consistency and improve efficiency in content delivery.</p>
				<h3>Use-cases and Importance in Content Reusability</h3>
				<ul>
					<li>Reuse of marketing banners across multiple product or campaign pages</li>
					<li>Deliver consistent content across websites, mobile, and email campaigns</li>
					<li>Centralized updates‚Äîedit once, reflect everywhere the fragment is used</li>
					<li>Personalization support through Adobe Target integration</li>
				</ul>
				<h3>Difference between Experience Fragment and Content Fragment</h3>
				<ul>
					<li><strong>Experience Fragment:</strong> Focuses on layout and multiple components (rich media, text, etc.)</li>
					<li><strong>Content Fragment:</strong> Structured content based on a model, generally text-based for headless CMS use</li>
					<li>XF is visual and layout-driven; CF is data-centric and better for APIs</li>
					<li>XF can include full experiences; CF typically holds raw, structured data like articles, product info, etc.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Experience Fragment Architecture</h2>
				<p>Experience Fragments in AEM are built on top of standard AEM page templates but designed specifically to encapsulate reusable, channel-agnostic experiences. Their architecture supports structured management, reuse, and delivery of experiences across multiple channels with variations for personalization and localization.</p>
				<h3>Experience Fragment Structure</h3>
				<ul>
					<li>Each Experience Fragment is created as a page under <code>/content/experience-fragments</code>.</li>
					<li>It includes a master variation and optionally other variations for personalization or localization.</li>
					<li>Each variation is structured like a page and can contain AEM components (e.g., image, text, button).</li>
					<li>The layout is defined using editable templates, making it flexible and extensible.</li>
				</ul>
				<h3>Variations and Templates</h3>
				<ul>
					<li>Templates define the layout and allowed components for an Experience Fragment.</li>
					<li>Variations allow you to create alternate versions of the same experience (e.g., based on region, audience, or campaign).</li>
					<li>The master variation serves as the default or base version.</li>
					<li>All variations share a common structure and are managed from a single XF console.</li>
				</ul>
				<h3>XF Root Structure (<code>/content/experience-fragments</code>)</h3>
				<ul>
					<li>All Experience Fragments are stored under the root path: <code>/content/experience-fragments</code>.</li>
					<li>They are organized by project or site to maintain clarity and separation.</li>
					<li>Each fragment under this path includes its own subfolders for variations and assets.</li>
					<li>This centralized structure helps in consistent management and retrieval of XFs across AEM and external channels.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Creating Experience Fragments</h2>
				<p>Creating Experience Fragments (XFs) in AEM is a straightforward process through the AEM Touch UI. You can select templates, add components, and manage multiple variations for delivering consistent and reusable experiences across channels.</p>
				<h3>Creating XF via AEM UI</h3>
				<ul>
					<li>Navigate to <strong>Experience Fragments</strong> in AEM from the Navigation menu.</li>
					<li>Click on the <strong>Create</strong> button and select <strong>Experience Fragment</strong>.</li>
					<li>Fill in details like title, name, and choose the destination folder.</li>
					<li>Click <strong>Next</strong> to proceed to template selection.</li>
				</ul>
				<h3>Choosing a Template</h3>
				<ul>
					<li>Templates define the layout structure and allowed components within the XF.</li>
					<li>Select a suitable template based on your design needs (e.g., Hero Banner, Promotional Layout).</li>
					<li>Templates can be customized or predefined as part of your project setup.</li>
				</ul>
				<h3>Creating Multiple Variations</h3>
				<ul>
					<li>Once the XF is created, the <strong>Master</strong> variation is created by default.</li>
					<li>You can add additional variations using the <strong>Create Variation</strong> option from the toolbar.</li>
					<li>Variations are used to tailor content for different regions, audiences, or use-cases.</li>
					<li>Each variation maintains the same structure but allows for custom content.</li>
				</ul>
				<h3>Adding Components in XF</h3>
				<ul>
					<li>Open the variation in the editor to start authoring.</li>
					<li>Drag and drop AEM components such as images, text, buttons, and custom components.</li>
					<li>Use layout containers to manage responsive design and structure.</li>
					<li>Save and preview the XF to verify how it appears in different channels or layouts.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Using Experience Fragments in Pages</h2>
				<p>Experience Fragments (XFs) can be embedded into regular AEM pages to promote content reusability, consistent branding, and easier maintenance. They allow authors to centrally manage experiences that can be reused across multiple pages or sites, with support for localization and variation.</p>
				<h3>Embedding XF in AEM pages</h3>
				<ul>
					<li>Open any AEM editable page in the editor.</li>
					<li>Drag and drop the <strong>Experience Fragment</strong> component from the component browser onto the page.</li>
					<li>Select the desired Experience Fragment variation from the dialog.</li>
					<li>Once added, the selected XF's content will render within the page.</li>
					<li>Authors can preview or publish the page, and the XF content will be dynamically included.</li>
				</ul>
				<h3>Using <code>core/wcm/components/experiencefragment/v1/experiencefragment</code></h3>
				<ul>
					<li>This is the core component provided by Adobe for embedding Experience Fragments.</li>
					<li>It supports rendering different XF variations, responsive layout, and clientlib inclusion.</li>
					<li>It can be used directly in page templates or components by referencing it in HTL like:</li>
				</ul>
				<pre>
&lt;sly data-sly-resource="${'xfPath' @ resourceType='core/wcm/components/experiencefragment/v1/experiencefragment'}"&gt;&lt;/sly&gt;
  </pre>
				<h3>How XF supports localization</h3>
				<ul>
					<li>Experience Fragments can have localized variations that match different language roots.</li>
					<li>When embedding XFs in language-specific sites, AEM automatically resolves the correct localized variation if available.</li>
					<li>This supports content reuse across different markets and regions while allowing tailored messaging per locale.</li>
					<li>Localization mappings are typically defined under <code>/content/experience-fragments/&lt;site&gt;/&lt;language&gt;</code>.</li>
				</ul>
			</section>
			<section class="card">
				<h2>XF and Personalization</h2>
				<p>Experience Fragments (XFs) can be integrated with Adobe Target or other personalization engines to deliver dynamic, audience-specific experiences. With XF variations and targeting rules, marketers can serve the right content to the right audience across channels.</p>
				<h3>Integration with Adobe Target</h3>
				<ul>
					<li>AEM allows Experience Fragments to be exported directly to Adobe Target as HTML offers.</li>
					<li>To enable this, configure the Adobe Target Cloud Service in AEM and enable <strong>Target Integration</strong> on the XF folder or site.</li>
					<li>From the XF editor, use the <strong>Export to Adobe Target</strong> option to push variations.</li>
					<li>Once in Target, XFs can be used within A/B tests, activities, and personalization campaigns.</li>
				</ul>
				<h3>Using XF for targeted experiences</h3>
				<ul>
					<li>XF variations allow authors to prepare multiple versions of the same content block for different audiences.</li>
					<li>These variations can be used within AEM or in Adobe Target to serve content based on user behavior, geography, device, or profile data.</li>
					<li>Each variation maintains its own layout and content, ensuring maximum flexibility.</li>
					<li>This promotes omnichannel consistency with centralized control over experience delivery.</li>
				</ul>
				<h3>Variations for different personas</h3>
				<ul>
					<li>Persona-specific variations in XFs allow marketers to define custom content for user segments like New Users, Returning Users, Premium Customers, etc.</li>
					<li>These personas can be managed within Adobe Target or via AEM's ContextHub or Adobe Audience Manager.</li>
					<li>The correct variation is shown dynamically based on targeting rules, improving engagement and conversion rates.</li>
					<li>This approach supports scalable personalization without duplicating content structures across pages or templates.</li>
				</ul>
				<p><em>üîç Want to learn how to use Experience Fragments for personalized content? Check out our <a href="../authoring/personalization-and-targeting.html">Personalization and Targeting guide</a>.</em></p>
			</section>
			<section class="card">
				<h2>Experience Fragment vs Content Fragment</h2>
				<p>Experience Fragments (XFs) and Content Fragments (CFs) are both powerful content reuse tools in AEM, but they serve different purposes. Understanding their differences helps choose the right one for your use case.</p>
				<h3>Key Differences</h3>
				<ul>
					<li><strong>Experience Fragment (XF):</strong> Includes layout, style, and multiple components (like images, text, buttons) ‚Äî essentially a section of a page with design.</li>
					<li><strong>Content Fragment (CF):</strong> Purely content-based and structure-driven, typically used for structured text data without layout ‚Äî ideal for headless or omnichannel delivery.</li>
					<li>XF can be authored visually using the page editor, while CF uses structured content fields and rich text editors.</li>
					<li>XF supports multiple variations for personalization and localization; CF supports content variations for channels or languages.</li>
					<li>XF is suitable for WYSIWYG experiences; CF is suitable for channel-agnostic content delivery.</li>
				</ul>
				<h3>When to Use What</h3>
				<ul>
					<li>
						Use <strong>Experience Fragments</strong> when:
						<ul>
							<li>You need to reuse styled, component-based sections across pages or sites.</li>
							<li>You want to export content for personalization (e.g., to Adobe Target).</li>
							<li>Layout and design consistency is important.</li>
						</ul>
					</li>
					<li>
						Use <strong>Content Fragments</strong> when:
						<ul>
							<li>You need structured content to deliver to multiple channels (headless use cases).</li>
							<li>You're working with dynamic, reusable content like blogs, articles, or product descriptions.</li>
							<li>You want to separate content from presentation entirely.</li>
						</ul>
					</li>
				</ul>
			</section>
			<section class="card">
				<h2>Headless Use with Experience Fragments (XFs)</h2>
				<p>Experience Fragments can be used in headless scenarios by exposing them as JSON through AEM's Content Services. This allows structured and styled content to be consumed by external applications, SPAs, or mobile apps.</p>
				<h3>How to Enable Headless Delivery</h3>
				<ul>
					<li>Create an Experience Fragment Variation intended for headless use (e.g., XF-API version).</li>
					<li>Ensure that only headless-compatible components (e.g., core components with JSON exporter support) are used.</li>
					<li>Expose the variation via a content services endpoint like:
						<br>
						<code>/content/experience-fragments/we-retail/us/en/homepage/master.model.json</code>
					</li>
					<li>Consume the XF JSON in frontend apps using AJAX, Fetch, or GraphQL (if integrated).</li>
				</ul>
				<h3>Best Practices for Headless XF</h3>
				<ul>
					<li>Keep variations lightweight and avoid heavy styling components not compatible with JSON output.</li>
					<li>Use content policies and templates to maintain consistency across reusable fragments.</li>
					<li>Consider localization and personalization requirements for XF JSON consumers.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Best Practices for Experience Fragments</h2>
				<p>Following best practices while working with Experience Fragments ensures scalable, reusable, and maintainable content across multiple channels. It helps teams to stay organized and aligned with AEM standards.</p>
				<h3>Naming Conventions</h3>
				<ul>
					<li>Use meaningful and descriptive names for fragments and variations (e.g., <code>homepage-banner-desktop</code>).</li>
					<li>Follow consistent naming patterns across projects to aid in discoverability and collaboration.</li>
					<li>Avoid using special characters or spaces in fragment names and paths.</li>
				</ul>
				<h3>Folder and Template Organization</h3>
				<ul>
					<li>Group XFs logically by site section, brand, or campaign within the Experience Fragments console.</li>
					<li>Create and use dedicated XF templates for specific use-cases like banners, hero components, or promotional layouts.</li>
					<li>Use folder-level permissions to manage access and ensure proper governance.</li>
				</ul>
				<h3>Reusability and Modular Design</h3>
				<ul>
					<li>Break complex page content into reusable fragments that can be inserted across multiple pages or channels.</li>
					<li>Design XFs with modular components to enable flexible content assembly.</li>
					<li>Avoid duplicating content by reusing existing XFs and managing variations for different contexts.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Common Issues and Troubleshooting</h2>
				<p>While working with Experience Fragments (XFs), developers may encounter rendering issues, configuration mistakes, or caching problems. Understanding these common pitfalls helps in faster debugging and smoother development.</p>
				<h3>XF Not Rendering Correctly on Pages</h3>
				<ul>
					<li>Ensure that the correct XF variation is selected in the component properties.</li>
					<li>Verify that the embedded XF has published content and is accessible.</li>
					<li>Check if the required client libraries or styles are loaded on the page where the XF is used.</li>
				</ul>
				<h3>Missing Template Errors</h3>
				<ul>
					<li>Ensure the XF variation uses a valid and available template in AEM.</li>
					<li>Verify that the template structure and allowed components are properly defined.</li>
					<li>Confirm that the referenced template is published if used on a published page.</li>
				</ul>
				<h3>Dispatcher/Cache Issues with XF</h3>
				<ul>
					<li>Check if the XF JSON endpoints or XF paths are properly whitelisted in dispatcher rules.</li>
					<li>Flush dispatcher cache after XF updates to reflect changes immediately on the publish tier.</li>
					<li>Ensure XF paths are not excluded or blocked by rewrite or filter rules in the dispatcher configuration.</li>
				</ul>
			</section>
			<section class="card">
				<h2>Advanced Concepts</h2>
				<p>Experience Fragments (XFs) offer advanced capabilities for modern content architectures, including editable templates, headless delivery, and programmatic creation to support dynamic, multi-channel experiences.</p>
				<h3>Editable Templates Used in XF</h3>
				<ul>
					<li>Editable templates define the structure, allowed components, and policies of Experience Fragments.</li>
					<li>They allow content authors to work within a guided layout while enabling flexibility in design.</li>
					<li>Templates can enforce branding and structural consistency across different XF variations.</li>
				</ul>
				<h3>XF as a Headless Content Block in React/Angular</h3>
				<ul>
					<li>Experience Fragments can be consumed as JSON via AEM's Content Services to power headless applications.</li>
					<li>Frontend frameworks like React or Angular can render XFs by fetching XF JSON from endpoints such as: <br><code>/content/experience-fragments/your-xf-path.model.json</code></li>
					<li>This enables content reuse across web, mobile apps, and third-party channels without relying on traditional page rendering.</li>
				</ul>
				<h3>Programmatically Creating Experience Fragments (via Code)</h3>
				<ul>
					<li>Developers can create and configure XFs programmatically using Java APIs, JCR node creation, or Groovy scripts.</li>
					<li>Programmatic creation helps in large-scale onboarding, automated migration, or batch updates of fragments.</li>
					<li>Example: Using Sling APIs to create nodes of type <code>cq:Page</code> under <code>/content/experience-fragments</code> and setting necessary properties like template, structure, and variation metadata.</li>
				</ul>
			</section>
			<script src="https://utteranc.es/client.js" repo="ashishrajbhagat/aem-tutorial" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
		</main>
		<script src="../js/script.js"></script>
	</body>
</html>
