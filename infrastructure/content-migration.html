<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AEM Tutorial - Content Migration Best Practices</title>
        <meta name="description" content="Master Adobe Experience Manager (AEM) with our in-depth tutorials, covering AEM components, workflows, servlets, models, Sling, OSGi services, Touch UI dialogs, CRXDE, and more. Perfect for beginners, advanced developers, and AEM architects looking to enhance their skills. Learn how to build scalable and efficient AEM solutions with best practices.">
        <meta name="keywords" content="AEM, Adobe Experience Manager, AEM Tutorial, AEM Training, AEM Components, AEM Workflows, AEM Servlets, AEM Models, AEM Sling, AEM OSGi, AEM Touch UI, AEM CRXDE, AEM DAM, AEM Metadata, AEM Content Fragments, AEM Experience Fragments, AEM Editable Templates, AEM Dispatcher, AEM Forms, AEM Sites, AEM Assets, AEM Cloud, AEM as a Cloud Service, AEM On-Premise, AEM SEO, AEM Best Practices, Learn AEM, AEM Course, AEM Development, AEM Headless, AEM SPA, AEM React, AEM Angular, AEM HTL, AEM Sightly, AEM Frontend, AEM Backend, AEM Workflow Development, AEM Performance Optimization, AEM Interview Questions">
        <meta name="author" content="Ashish Raj">
		<link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="stylesheet" href="../css/styles.css">
    </head>
    <body>
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <h2><a href="../">AEM Tutorial</a></h2>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebarSearch" placeholder="ðŸ” Search..." />
            </div>
            <nav class="nav" id="sidebar-nav"></nav>
            <div class="footer">
                <p>&copy; 2025 AEM Tutorial</p>
            </div>
        </div>
        <span class="hamburger" onclick="toggleMenu()">&#9776;</span>
        <main class="content" id="content">
            <h1>Content Migration Best Practices</h1>
            <section class="card">
                <h2>Introduction</h2>
                <p>Content migration in AEM refers to the process of moving content, users, assets, and configurations from one AEM environment to another. This is typically required during major upgrades, restructuring initiatives, site consolidations, or onboarding of new tenants.</p>
                <h3>Why Migrate Content?</h3>
                <ul>
                    <li>Upgrading from older AEM versions or migrating from CRX2 to Oak</li>
                    <li>Restructuring content hierarchy for better SEO or performance</li>
                    <li>Merging multiple websites or brands into a unified platform</li>
                    <li>Onboarding new business units or clients onto an existing AEM platform</li>
                </ul>
                <h3>Potential Risks</h3>
                <ul>
                    <li>Loss of data or metadata if content isn't mapped correctly</li>
                    <li>Broken references and internal links</li>
                    <li>Permission inconsistencies (ACLs, user groups)</li>
                    <li>Performance impact during bulk import operations</li>
                </ul>
            </section>
            <section class="card">
                <h2>Migration Tools in AEM</h2>
                <p>AEM offers multiple tools and approaches to perform safe and efficient content migration, each suited for different use cases. Below are the most commonly used options:</p>
                <h3>VLT (Vault Remote Copy)</h3>
                <p>VLT is a command-line tool provided by Adobe that lets you copy content between remote AEM repositories.</p>
                <ul>
                    <li>Supports recursive copying from one instance to another</li>
                    <li>Useful for large bulk transfers where Package Manager becomes impractical</li>
                    <li>Requires VLT to be installed on your system</li>
                </ul>
                <p><strong>Example Command:</strong></p>
                <pre>vlt rcp -u admin -p admin http://localhost:4502/crx -r /content/site1 /content/site2</pre>
                <h3>CRX2Oak</h3>
                <p>CRX2Oak is a one-time-use tool used during repository upgrades from CRX2 (AEM 5.x) to Oak (AEM 6.x+). It migrates the entire content repository in a structured and controlled manner.</p>
                <ul>
                    <li>Excludes certain system paths and binaries if configured</li>
                    <li>Recommended during major version upgrades</li>
                    <li>Run with AEM offline for accuracy and safety</li>
                </ul>
                <h3>Package Manager (Content Packages)</h3>
                <p>The most common method for content migration in AEM is using content packages via the Package Manager UI.</p>
                <ul>
                    <li>Packages are zipped content files that can include nodes, assets, and configurations</li>
                    <li>Use filters to specify which paths to include or exclude</li>
                    <li>Supports repeatable, modular deployment of content across environments</li>
                </ul>
                <h3>ACS Commons Content Migrator</h3>
                <p>This tool, available in ACS AEM Commons, provides a user-friendly interface for importing and exporting structured content using spreadsheets or JSON.</p>
                <ul>
                    <li>Great for authors and developers to migrate editable content</li>
                    <li>Supports batch content creation and editing</li>
                    <li>Ideal for site bootstrapping, initial onboarding, or testing</li>
                </ul>
            </section>
            <section class="card">
                <h2>Bulk User/Group Creation</h2>
                <p>When onboarding new tenants or migrating user bases between environments, it's often necessary to create a large number of users and assign them to appropriate groups in AEM.</p>
                <h3>Common Scenarios</h3>
                <ul>
                    <li>Onboarding dozens or hundreds of authors/editors</li>
                    <li>Creating tenant-specific user groups in multi-site setups</li>
                    <li>Manual provisioning in case of LDAP sync fallback</li>
                </ul>
                <h3>Tools and Approaches</h3>
                <ul>
                    <li><strong>CURL-based API automation:</strong> Use HTTP POST calls to <code>/libs/granite/security/post/authorizables</code> to create users/groups</li>
                    <li><strong>Script-based Group Assignment:</strong> Use Groovy or backend Java code (via servlet or workflow process step) to assign users to groups</li>
                    <li><strong>Package-based user node creation:</strong> Export users as content packages, but avoid for production passwords and credentials due to encryption risks</li>
                </ul>
            </section>
            <section class="card">
                <h2>Content Tree Restructuring</h2>
                <p>During content migration, it's common to reorganize or flatten deeply nested folder structures for better usability, URL structure, or authoring efficiency.</p>
                <h3>Approaches</h3>
                <ul>
                    <li><strong>JCR Console:</strong> Use CRXDE Lite to manually move and rename folders or pages</li>
                    <li><strong>Custom Scripts:</strong> Write Groovy scripts or Java services to recursively move and rename content nodes</li>
                    <li><strong>Sling Pipes:</strong> Use AEM's Sling Pipes to perform declarative restructuring of the JCR tree</li>
                </ul>
                <h3>Post-Migration Tasks</h3>
                <ul>
                    <li>Update hardcoded paths in components and templates</li>
                    <li>Reconfigure workflow launchers that listen on old paths</li>
                    <li>Fix broken links or redirects caused by the move</li>
                </ul>
            </section>
            <section class="card">
                <h2>Migrating DAM Assets</h2>
                <p>Assets can make up a large portion of repository size. Migrating them carefully is key to preserving metadata, renditions, and performance.</p>
                <h3>Asset Migration Options</h3>
                <ul>
                    <li><strong>Package Manager:</strong> Create packages containing assets under <code>/content/dam</code></li>
                    <li><strong>VLT RCP:</strong> Transfer assets from one instance to another using remote copy</li>
                    <li><strong>Asset Ingestion APIs:</strong> Use the AEM HTTP API or Sling POST servlet for batch uploads</li>
                </ul>
                <h3>Important Considerations</h3>
                <ul>
                    <li>Preserve metadata (e.g., <code>dc:title</code>, <code>cq:tags</code>)</li>
                    <li>Ensure renditions are either included or regenerated post-migration</li>
                    <li>For large files, use chunked upload techniques or asynchronous ingestion</li>
                </ul>
                <p><em>Pro Tip:</em> Use AEM Asset Upload Servlet or bulk importers for migrating 10,000+ assets efficiently.</p>
            </section>
            <section class="card">
                <h2>Metadata & Tag Consistency</h2>
                <p>Tags and metadata play a key role in organizing and categorizing content in AEM. Ensuring consistency during migration helps preserve searchability, personalization, and reporting features.</p>
                <h3>Tag Migration Tips</h3>
                <ul>
                    <li>Migrate tag structures from <code>/etc/tags</code> or <code>/content/cq:tags</code> (in newer versions)</li>
                    <li>Maintain custom tag namespaces (e.g., <code>industry:healthcare</code>)</li>
                    <li>Preserve tag IDs and paths to avoid breaking references in components or dialogs</li>
                </ul>
                <h3>Metadata Consistency</h3>
                <ul>
                    <li>Ensure asset metadata (title, description, format) is migrated properly</li>
                    <li>Maintain references to tags via <code>cq:tags</code> or <code>dc:subject</code> properties</li>
                    <li>Audit migrated pages and assets to validate metadata completeness</li>
                </ul>
            </section>
            <section class="card">
                <h2>Permissions & Access Control</h2>
                <p>Maintaining user permissions and group-based access control is critical during migration to prevent unauthorized access and broken authoring workflows.</p>
                <h3>How to Handle ACLs</h3>
                <ul>
                    <li>Use <strong>ACL Packager</strong> or <strong>Access Control tool</strong> from ACS Commons to export/import permissions</li>
                    <li>Avoid overwriting ACLs during package installation unless explicitly intended</li>
                    <li>Test permissions after migration with different author/test accounts</li>
                </ul>
                <h3>Post-Migration Tasks</h3>
                <ul>
                    <li>Reassign users/groups in case of user ID changes</li>
                    <li>Verify access rights for critical paths (<code>/content</code>, <code>/dam</code>, <code>/conf</code>)</li>
                    <li>Clean up unused or orphaned access control policies</li>
                </ul>
            </section>
            <section class="card">
                <h2>Validating Migration Success</h2>
                <p>Validation ensures that migrated content behaves as expected and meets project requirements. Perform both functional and structural checks before going live.</p>
                <h3>Tools for Validation</h3>
                <ul>
                    <li><code>curl</code> - test endpoint responses and page availability</li>
                    <li><strong>CRXDE Lite</strong> - manually inspect node structures and properties</li>
                    <li><strong>Query Builder</strong> - search for expected content or missing properties</li>
                    <li><strong>Automated Tests</strong> - Selenium, JUnit, Groovy scripts</li>
                </ul>
                <h3>What to Validate</h3>
                <ul>
                    <li>Content hierarchy and page structure</li>
                    <li>Binary asset integrity and rendition availability</li>
                    <li>Tag links and metadata</li>
                    <li>Permissions and group-based access</li>
                    <li>Navigation structure and internal references</li>
                </ul>
            </section>
            <section class="card">
                <h2>Best Practices</h2>
                <ul>
                    <li><strong>Backup your source and target environments</strong> before migration</li>
                    <li><strong>Run migration in staging</strong> first to test and refine the process</li>
                    <li><strong>Use version control</strong> for all scripts, configuration, and migration mappings</li>
                    <li><strong>Document each step</strong> of the migration with expected outcomes and rollback procedures</li>
                    <li><strong>Automate where possible</strong> (e.g., asset uploads, ACL imports, validation checks)</li>
                    <li><strong>Test thoroughly</strong> before pushing to production â€” check content accuracy, security, and UI consistency</li>
                </ul>
            </section>
            <script src="https://utteranc.es/client.js" repo="ashishrajbhagat/aem-tutorial" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
        </main>
        <script src="../js/script.js"></script>
    </body>
</html>
