<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AEM Tutorial - SSL Secure Login</title>
        <meta name="description" content="Master Adobe Experience Manager (AEM) with our in-depth tutorials, covering AEM components, workflows, servlets, models, Sling, OSGi services, Touch UI dialogs, CRXDE, and more. Perfect for beginners, advanced developers, and AEM architects looking to enhance their skills. Learn how to build scalable and efficient AEM solutions with best practices.">
        <meta name="keywords" content="AEM, Adobe Experience Manager, AEM Tutorial, AEM Training, AEM Components, AEM Workflows, AEM Servlets, AEM Models, AEM Sling, AEM OSGi, AEM Touch UI, AEM CRXDE, AEM DAM, AEM Metadata, AEM Content Fragments, AEM Experience Fragments, AEM Editable Templates, AEM Dispatcher, AEM Forms, AEM Sites, AEM Assets, AEM Cloud, AEM as a Cloud Service, AEM On-Premise, AEM SEO, AEM Best Practices, Learn AEM, AEM Course, AEM Development, AEM Headless, AEM SPA, AEM React, AEM Angular, AEM HTL, AEM Sightly, AEM Frontend, AEM Backend, AEM Workflow Development, AEM Performance Optimization, AEM Interview Questions">
        <meta name="author" content="Ashish Raj">
		<link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="stylesheet" href="../css/styles.css">
    </head>
    <body>
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <h2>AEM Tutorial</h2>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebarSearch" placeholder="ðŸ” Search..." />
            </div>
            <nav class="nav" id="sidebar-nav"></nav>
            <div class="footer">
                <p>&copy; 2025 AEM Tutorial</p>
            </div>
        </div>
        <span class="hamburger" onclick="toggleMenu()">&#9776;</span>
        <main class="content" id="content">
            <h1>SSL Secure Login</h1>
            <section class="card">
                <h2>Introduction to SSL in AEM</h2>
                <p>SSL (Secure Sockets Layer) and its successor TLS (Transport Layer Security) are cryptographic protocols that provide encrypted communication over the web. In AEM, SSL ensures that data transmitted between users, dispatchers, and AEM instances remains secure and tamper-proof.</p>
                <h3>What is SSL/TLS?</h3>
                <ul>
                    <li>SSL and TLS protect data by encrypting traffic between client and server.</li>
                    <li>Modern browsers and applications rely on TLS â€” SSL is considered deprecated and insecure.</li>
                    <li>AEM environments should always use TLS (preferably TLS 1.2 or 1.3).</li>
                </ul>
                <h3>Why SSL is Critical for AEM</h3>
                <ul>
                    <li>Protects admin credentials and session tokens during login.</li>
                    <li>Secures asset uploads and downloads from <code>/content/dam</code>.</li>
                    <li>Ensures secure replication between Author and Publish instances.</li>
                    <li>Prevents man-in-the-middle (MITM) attacks and session hijacking.</li>
                </ul>
                <h3>TLS vs SSL - Best Practices</h3>
                <ul>
                    <li>Always disable SSLv2, SSLv3, and older TLS versions.</li>
                    <li>Use TLS 1.2 or TLS 1.3 only.</li>
                    <li>Ensure your web server/Dispatcher uses strong cipher suites and secure protocols.</li>
                </ul>
            </section>
            <section class="card">
                <h2>HTTPS Expectations in AEM</h2>
                <p>Adobe recommends running all AEM instances and user interactions over HTTPS to maintain a secure environment. Whether on Author or Publish, sensitive operations like login, token generation, or content submission should never occur over HTTP.</p>
                <h3>AEM Assumes HTTPS for Sensitive Operations</h3>
                <ul>
                    <li>Login sessions and authoring interfaces expect secure transport (especially via Touch UI).</li>
                    <li>Access to CRXDE Lite, /libs, /bin, and other authoring tools must be secured via HTTPS.</li>
                </ul>
                <h3>Why HTTPS is Important</h3>
                <ul>
                    <li><strong>Login tokens:</strong> If intercepted over HTTP, session tokens can be reused by attackers.</li>
                    <li><strong>Cookies:</strong> Secure cookies must have the <code>Secure</code> and <code>HttpOnly</code> flags set to prevent theft and XSS access.</li>
                    <li><strong>Replication:</strong> Author-to-Publish replication should use HTTPS when transmitting private or protected content.</li>
                </ul>
                <h3>Secure Communication Required Between:</h3>
                <ul>
                    <li><strong>Author & Users:</strong> Editors, admins, and contributors using the Author UI.</li>
                    <li><strong>Dispatcher & AEM:</strong> Internal traffic must be protected, especially if login or restricted content is involved.</li>
                    <li><strong>Author â†” Publish (Replication):</strong> Replication agents should use secure endpoints.</li>
                </ul>
            </section>
            <section class="card">
                <h2>SSL/TLS Termination</h2>
                <p>In most AEM deployments, SSL is terminated at the edge â€” either at the Dispatcher (Apache/NGINX) or an external load balancer â€” rather than inside AEM itself.</p>
                <h3>Common SSL Termination Points</h3>
                <ul>
                    <li>
                        <strong>Dispatcher (Apache HTTP Server or NGINX):</strong>
                        <ul>
                            <li>Handles SSL termination and forwards traffic to AEM over HTTP.</li>
                            <li>Manages certificates and redirects all HTTP to HTTPS.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Load Balancers (e.g., AWS ALB, Azure Application Gateway):</strong>
                        <ul>
                            <li>SSL termination can occur at the cloud edge, with internal traffic routed securely or privately.</li>
                            <li>Simplifies certificate management across multiple nodes.</li>
                        </ul>
                    </li>
                </ul>
                <h3>Benefits of SSL Termination at the Edge</h3>
                <ul>
                    <li>Offloads encryption/decryption from AEM, improving performance.</li>
                    <li>Makes certificate renewal and management centralized and easier.</li>
                    <li>Allows consistent HTTPS handling across all endpoints (Author, Publish, Dispatcher).</li>
                </ul>
            </section>
            <section class="card">
                <h2>Configuring SSL at Dispatcher Level</h2>
                <p>SSL is typically handled at the Dispatcher (Apache HTTP Server or NGINX), which forwards secure traffic to the AEM backend. Below are common practices for setting up HTTPS and redirecting insecure traffic.</p>
                <h3>Apache HTTP Server: Enabling HTTPS via mod_ssl</h3>
                <ul>
                    <li>Enable the <code>mod_ssl</code> module and ensure OpenSSL is installed.</li>
                    <li>Create or install SSL certificates (self-signed, Let's Encrypt, or commercial).</li>
                    <li>Use a dedicated VirtualHost for port 443 with SSL enabled.</li>
                </ul>
                <h3>Sample <code>vhost</code> Configuration</h3>
                <pre>&lt;VirtualHost *:443&gt;
    ServerName www.example.com

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/example.crt
    SSLCertificateKeyFile /etc/ssl/private/example.key
    SSLCertificateChainFile /etc/ssl/certs/intermediate.crt

    DocumentRoot "/var/www/html"
    
    &lt;Directory "/var/www/html"&gt;
        Require all granted
    &lt;/Directory&gt;

    # Dispatcher-specific config
    Include conf/dispatcher.any
&lt;/VirtualHost&gt;</pre>
                <h3>Redirecting HTTP to HTTPS</h3>
                <p>Use a RewriteRule in your port 80 VirtualHost to force HTTPS:</p>
                <pre>&lt;VirtualHost *:80&gt;
    ServerName www.example.com
    RewriteEngine On
    RewriteRule ^/(.*) https://www.example.com/$1 [R=301,L]
&lt;/VirtualHost&gt;</pre>
                <h3>NGINX (Optional)</h3>
                <ul>
                    <li>NGINX can also act as a secure reverse proxy in place of Apache.</li>
                    <li>Use <code>listen 443 ssl;</code> and configure <code>ssl_certificate</code> and <code>ssl_certificate_key</code>.</li>
                </ul>
                <h3>Let's Encrypt vs Commercial Certificates</h3>
                <ul>
                    <li><strong>Let's Encrypt:</strong> Free, automated certificates using tools like Certbot; ideal for most use cases.</li>
                    <li><strong>Commercial Certificates:</strong> May offer extended validation (EV), support, and trusted root chains for enterprise use.</li>
                </ul>
                <h3>Renewing SSL Certificates</h3>
                <ul>
                    <li>Let's Encrypt certificates are valid for 90 days and can be renewed via a cron job or Certbot hook.</li>
                    <li>Ensure auto-renewals reload the web server using <code>systemctl reload apache2</code> or similar.</li>
                    <li>For commercial certs, track expiration and renew annually.</li>
                </ul>
            </section>
            <section class="card">
                <h2>Secure Headers for SSL</h2>
                <p>In addition to HTTPS, enabling security headers adds another layer of protection to your AEM environment by preventing common web-based attacks.</p>
                <h3>Recommended Headers to Add</h3>
                <ul>
                    <li>
                        <strong>Strict-Transport-Security (HSTS):</strong> Forces HTTPS for all future requests.
                        <pre>Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"</pre>
                    </li>
                    <li>
                        <strong>X-Content-Type-Options:</strong> Prevents MIME-sniffing.
                        <pre>Header set X-Content-Type-Options "nosniff"</pre>
                    </li>
                    <li>
                        <strong>X-Frame-Options:</strong> Prevents clickjacking by disallowing framing.
                        <pre>Header set X-Frame-Options "SAMEORIGIN"</pre>
                    </li>
                    <li>
                        <strong>X-XSS-Protection:</strong> Enables browser's built-in XSS protection.
                        <pre>Header set X-XSS-Protection "1; mode=block"</pre>
                    </li>
                </ul>
                <p>These headers can be added in Apache's VirtualHost or globally in the <code>.htaccess</code> or <code>conf.d/security.conf</code> file.</p>
            </section>
            <section class="card">
                <h2>Secure Cookies and Login Tokens</h2>
                <p>AEM uses login tokens stored in browser cookies to maintain authenticated sessions. If not configured securely, these tokens can be exposed and stolen via insecure channels or scripts.</p>
                <h3>AEM Login Tokens Should Be:</h3>
                <ul>
                    <li><strong>Sent over HTTPS only:</strong> Never allow token cookies to transmit over HTTP.</li>
                    <li><strong>Marked with <code>HttpOnly</code> and <code>Secure</code> flags:</strong> Prevents access from JavaScript and ensures they're sent only over secure connections.</li>
                </ul>
                <h3>Token Configuration in AEM</h3>
                <ul>
                    <li>Managed via the OSGi config: <strong>Apache Jackrabbit Oak TokenConfiguration</strong></li>
                    <li>You can configure token expiration time, cleanup behavior, and more.</li>
                    <li>Tokens are stored under <code>/home/users/&lt;uid&gt;/tokens</code> in the JCR.</li>
                </ul>
                <h3>Risks of Insecure Cookie Transmission</h3>
                <ul>
                    <li>Session tokens sent over HTTP can be intercepted by attackers using sniffing tools.</li>
                    <li>Without <code>HttpOnly</code>, scripts can access tokens via <code>document.cookie</code> (XSS attack vector).</li>
                    <li>This may result in session hijacking or privilege escalation.</li>
                </ul>
            </section>
            <section class="card">
                <h2>SSL for AEM Author & Publish</h2>
                <p>Even if AEM Author and Publish are deployed behind a secure internal network or VPN, it's still recommended to configure SSL for local interfaces to maintain end-to-end encryption.</p>
                <h3>Typical Deployment</h3>
                <ul>
                    <li>Author and Publish instances are often behind reverse proxies, load balancers, or VPN firewalls.</li>
                    <li>However, direct SSL support in AEM adds an extra layer of security â€” especially for testing environments.</li>
                </ul>
                <h3>Configuring HTTPS in AEM Directly</h3>
                <ul>
                    <li>
                        <strong>1. Generate a Keystore:</strong> Use Java's <code>keytool</code> to create a keystore and self-signed certificate.
                        <pre>keytool -genkey -alias aem -keyalg RSA -keystore aem-ssl.keystore -storepass password</pre>
                    </li>
                    <li>
                        <strong>2. Update sling.properties:</strong> Add file path and password properties.
                        <pre>sling.bootdelegation.class.org.bouncycastle=org.bouncycastle.*</pre>
                    </li>
                    <li>
                        <strong>3. Modify OSGi Config:</strong> Go to Felix Console â†’ <code>org.apache.felix.http</code> and set:
                        <ul>
                            <li><code>HTTPS Port</code> (e.g., 8443)</li>
                            <li><code>Keystore File</code> and <code>Keystore Password</code></li>
                            <li><code>Enable HTTPS = true</code></li>
                        </ul>
                    </li>
                    <li>Restart AEM and access via <code>https://localhost:8443</code></li>
                </ul>
            </section>
            <section class="card">
                <h2>Replication and SSL</h2>
                <p>Replication between Author and Publish instances can and should be performed over HTTPS to ensure data integrity and security, especially for restricted or dynamic content.</p>
                <h3>Using Secure Replication</h3>
                <ul>
                    <li>
                        In the replication agent configuration:
                        <ul>
                            <li>Set the transport URI to <code>https://publish-instance:port/bin/receive</code></li>
                        </ul>
                    </li>
                    <li>Ensure the SSL certificate on the Publish instance is valid and trusted by the Author environment.</li>
                </ul>
                <h3>Authentication for Secure Replication</h3>
                <ul>
                    <li>Use basic authentication (username/password) for secured endpoints.</li>
                    <li>Ensure the user account used has replication permissions.</li>
                    <li>Optionally configure mutual TLS (client certificate authentication) for added security.</li>
                </ul>
                <p>Secure replication helps prevent unauthorized data interception, spoofing, or data tampering during content deployment.</p>
            </section>
            <section class="card">
                <h2>Common Mistakes to Avoid</h2>
                <p>Many security vulnerabilities arise from misconfigured or incomplete SSL implementations. Avoid these common pitfalls when securing your AEM environments:</p>
                <ul>
                    <li><strong>Not redirecting HTTP to HTTPS:</strong> Users may access insecure URLs unless HTTP is forcefully redirected to HTTPS.</li>
                    <li><strong>Not terminating SSL at the edge:</strong> Leaving SSL management to AEM instead of Dispatcher or a load balancer complicates scaling and performance.</li>
                    <li><strong>Using self-signed certificates in production:</strong> These are not trusted by browsers and users will see warnings; always use valid, trusted certificates.</li>
                    <li><strong>Insecure cookie flags:</strong> Missing <code>Secure</code> and <code>HttpOnly</code> flags expose login tokens to theft via MITM or XSS attacks.</li>
                    <li><strong>No HSTS header:</strong> Without <code>Strict-Transport-Security</code>, browsers may fallback to HTTP, exposing initial requests to interception.</li>
                </ul>
            </section>
            <section class="card">
                <h2>SSO Integration Over SSL</h2>
                <p>In enterprise environments, AEM often integrates with external identity providers (IdPs) like Azure AD, Okta, or Ping Identity using SAML or OAuth2. These integrations must also be secured over SSL to ensure the integrity and confidentiality of authentication flows.</p>
                <h3>SSO + SSL Considerations</h3>
                <ul>
                    <li>Always use <code>https://</code> URLs for the SAML assertion consumer service (ACS) endpoint or OAuth callback URL.</li>
                    <li>The IdP should also be accessible via HTTPS, and AEM must trust its certificate chain.</li>
                    <li>SSL is essential to prevent man-in-the-middle attacks during redirect-based authentication exchanges.</li>
                    <li>Validate and monitor SSO cookies and session tokens â€” especially when injected through Dispatcher headers.</li>
                </ul>
                <h3>Example: Azure AD + SAML over SSL</h3>
                <ul>
                    <li>Configure <code>SAML Authentication Handler</code> in AEM with a secure ACS URL (e.g., <code>https://author.example.com/saml_login</code>).</li>
                    <li>Upload the IdP metadata and set AEM's public cert/key in Azure AD with the correct redirect URI.</li>
                    <li>Test the authentication flow and inspect headers, cookies, and SSL handshake in browser dev tools.</li>
                </ul>
            </section>
            <section class="card">
                <h2>SSL in AEM as a Cloud Service (AEMaaCS)</h2>
                <p>In AEMaaCS, Adobe manages most infrastructure aspects, including SSL. While similar concepts apply, there are key differences from on-premise deployments.</p>
                <h3>SSL Handling in AEMaaCS</h3>
                <ul>
                    <li>Adobe terminates SSL at the edge (Adobe-managed CDN or load balancer).</li>
                    <li>Custom domains and SSL certs can be configured through the Adobe I/O Cloud Manager.</li>
                    <li>You don't manage Apache, Dispatcher, or TLS certificates directly â€” Adobe handles certificate provisioning and renewal.</li>
                </ul>
                <h3>Developer Considerations</h3>
                <ul>
                    <li>Always test SSO, login flows, and token-related customizations in lower environments before pushing to production.</li>
                    <li>Monitor secure cookies and headers in browser tools to ensure HTTPS is consistently enforced across custom domains.</li>
                    <li>Use Adobe's documentation and Cloud Manager settings to handle any required configuration updates.</li>
                </ul>
                <p><strong>Key Difference:</strong> In AEM On-Premise, you're responsible for setting up SSL at Dispatcher and managing certs. In AEMaaCS, Adobe does it for you â€” but you must configure custom domain settings properly for SSL to be active.</p>
            </section>
            <section class="card">
                <h2>Best Practices</h2>
                <p>Follow these SSL and secure login best practices to maintain a robust security posture for your AEM infrastructure:</p>
                <ul>
                    <li><strong>Always use TLS 1.2+:</strong> Disable older versions (SSLv2, SSLv3, TLS 1.0, 1.1) to prevent protocol downgrade attacks.</li>
                    <li><strong>Set short-lived login tokens:</strong> Reduce session lifetimes and use secure flags to prevent reuse or theft.</li>
                    <li><strong>Terminate SSL at the Dispatcher or load balancer:</strong> Simplifies certificate renewal and improves performance.</li>
                    <li><strong>Automate certificate renewal:</strong> Use tools like Let's Encrypt with <code>certbot</code> and cron jobs for seamless rotation.</li>
                    <li>
                        <strong>Scan your site for SSL issues:</strong> Use tools like:
                        <ul>
                            <li><a href="https://www.ssllabs.com/ssltest/" target="_blank">SSL Labs SSL Test</a></li>
                            <li><a href="https://securityheaders.com/" target="_blank">SecurityHeaders.com</a></li>
                        </ul>
                        to audit and improve your HTTPS and header configurations.
                    </li>
                </ul>
            </section>
            <script src="https://utteranc.es/client.js" repo="ashishrajbhagat/aem-tutorial" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
        </main>
        <script src="../js/script.js"></script>
    </body>
</html>